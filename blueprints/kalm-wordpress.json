{"api_version":"3.0","metadata":{"creation_time":"1544184517308692","kind":"blueprint","last_update_time":"1544298444052195","name":"kalm-wordpress","spec_version":27},"spec":{"description":"* [Wordpress](http:\/\/@@{WordpressK8sPublishedService.ingress}@@) This link does not work for now.","name":"kalm-wordpress","resources":{"app_profile_list":[{"action_list":[{"critical":false,"description":"","name":"Scale In","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"73af08c3_dag"},"name":"aa392a46_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[{"kind":"app_task","name":"Remove Replica"}],"description":"","name":"73af08c3_dag","retries":"0","timeout_secs":"0","type":"DAG","variable_list":[]},{"attrs":{"scaling_count":"1","scaling_type":"SCALEIN","type":""},"child_tasks_local_reference_list":[],"description":"","name":"Remove Replica","retries":"0","target_any_local_reference":{"kind":"app_blueprint_deployment","name":"wordpress_deployment"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"variable_list":[]},"type":"user"},{"critical":false,"description":"","name":"Scale Out","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"96f1530d_dag"},"name":"c7d47b65_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[{"kind":"app_task","name":"Add Replica"}],"description":"","name":"96f1530d_dag","retries":"0","timeout_secs":"0","type":"DAG","variable_list":[]},{"attrs":{"scaling_count":"1","scaling_type":"SCALEOUT","type":""},"child_tasks_local_reference_list":[],"description":"","name":"Add Replica","retries":"0","target_any_local_reference":{"kind":"app_blueprint_deployment","name":"wordpress_deployment"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"variable_list":[]},"type":"user"}],"deployment_create_list":[{"action_list":[],"depends_on_list":[],"description":"","max_replicas":"100","min_replicas":"1","name":"mysql_deployment","options":{"metadata":{"labels":{"app":"wordpress","provisioner":"calm"},"name":"wordpress-mysql","namespace":"@@{K8S_NAMESPACE}@@"},"spec":{"selector":{"matchLabels":{"app":"wordpress","tier":"mysql"}},"strategy":{"type":"Recreate"}},"type":"PROVISION_K8S_DEPLOYMENT"},"package_local_reference_list":[{"kind":"app_package","name":"Package2"}],"published_service_local_reference_list":[{"kind":"app_published_service","name":"MYSQLK8sPublishedService"}],"substrate_local_reference":{"kind":"app_substrate","name":"MYSQLAPP"},"type":"K8S_DEPLOYMENT","variable_list":[]},{"action_list":[],"depends_on_list":[],"description":"","editables":{"options":{"spec":{"replicas":true}}},"max_replicas":"100","min_replicas":"1","name":"wordpress_deployment","options":{"metadata":{"labels":{"app":"wordpress","provisioner":"calm"},"name":"wordpress","namespace":"@@{K8S_NAMESPACE}@@"},"spec":{"replicas":"1","selector":{"matchLabels":{"app":"wordpress","tier":"frontend"}},"strategy":{"type":"Recreate"}},"type":"PROVISION_K8S_DEPLOYMENT"},"package_local_reference_list":[{"kind":"app_package","name":"Package1"}],"published_service_local_reference_list":[{"kind":"app_published_service","name":"WordpressK8sPublishedService"}],"substrate_local_reference":{"kind":"app_substrate","name":"WORDPRESSAPP"},"type":"K8S_DEPLOYMENT","variable_list":[]}],"description":"","name":"Default","variable_list":[{"attrs":{"type":""},"description":"","editables":{"value":true},"label":"","name":"K8S_NAMESPACE","type":"LOCAL","val_type":"STRING","value":"wordpress"},{"attrs":{"is_secret_modified":false,"secret_reference":{},"type":""},"description":"","editables":{"value":true},"label":"","name":"MYSQL_PASSWORD","type":"SECRET","val_type":"STRING","value":""},{"attrs":{"type":""},"description":"","editables":{"value":true},"label":"","name":"WORDPRESS_SERVICE_TYPE","type":"LOCAL","val_type":"STRING","value":"NodePort"},{"attrs":{"type":""},"description":"","editables":{"value":true},"label":"","name":"WORDPRESS_VERSION","type":"LOCAL","val_type":"STRING","value":"5.0"}]}],"client_attrs":{"mysql_deployment":{"x":267,"y":-20.5},"wordpress_deployment":{"x":666,"y":-11.5}},"credential_definition_list":[],"package_definition_list":[{"action_list":[],"description":"","image_spec":{"image":"wordpress:@@{WORDPRESS_VERSION}@@-apache"},"name":"Package1","service_local_reference_list":[{"kind":"app_service","name":"apache_wordpress"}],"type":"K8S_IMAGE","variable_list":[],"version":""},{"action_list":[],"description":"","image_spec":{"image":"mysql:5.6"},"name":"Package2","service_local_reference_list":[{"kind":"app_service","name":"mysql"}],"type":"K8S_IMAGE","variable_list":[],"version":""}],"published_service_definition_list":[{"action_list":[],"depends_on_list":[],"description":"","name":"MYSQLK8sPublishedService","options":{"metadata":{"labels":{"app":"wordpress","provisioner":"calm"},"name":"wordpress-mysql","namespace":"@@{K8S_NAMESPACE}@@"},"spec":{"ports":[{"name":"mysql","port":3306,"protocol":"TCP","targetPort":3306}],"selector":{"app":"wordpress","tier":"mysql"}},"type":"PROVISION_K8S_SERVICE"},"port_list":[],"singleton":true,"tier":"","type":"K8S_SERVICE","variable_list":[]},{"action_list":[],"depends_on_list":[],"description":"","name":"WordpressK8sPublishedService","options":{"metadata":{"labels":{"app":"wordpress","provisioner":"calm"},"name":"wordpress","namespace":"@@{K8S_NAMESPACE}@@"},"spec":{"ports":[{"name":"wordpress","port":80,"protocol":"TCP","targetPort":80}],"selector":{"app":"wordpress","tier":"frontend"},"type":"@@{WORDPRESS_SERVICE_TYPE}@@"},"type":"PROVISION_K8S_SERVICE"},"port_list":[],"singleton":true,"tier":"","type":"K8S_SERVICE","variable_list":[]}],"service_definition_list":[{"action_list":[{"critical":false,"description":"System action for creating an application","name":"action_create","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"037fb23b_dag"},"name":"24c47329_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"037fb23b_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"apache_wordpress"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"690d4219_dag"},"name":"f32adc71_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"690d4219_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"apache_wordpress"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for restarting an application","name":"action_restart","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"8df6b0e5_dag"},"name":"d0b04cea_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"8df6b0e5_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"apache_wordpress"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for starting an application","name":"action_start","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"ffdc4647_dag"},"name":"bab6e671_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"ffdc4647_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"apache_wordpress"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for stopping an application","name":"action_stop","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"4f247761_dag"},"name":"63b74e8d_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"4f247761_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"apache_wordpress"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"}],"container_spec":{"env":[{"name":"WORDPRESS_DB_HOST","value":"@@{MYSQLK8sPublishedService.name}@@"},{"name":"WORDPRESS_DB_PASSWORD","value":"@@{MYSQL_PASSWORD}@@"}],"name":"wordpress","ports":[{"containerPort":80,"name":"wordpress"}]},"depends_on_list":[{"kind":"app_service","name":"mysql"}],"description":"","name":"apache_wordpress","port_list":[],"singleton":false,"tier":"","variable_list":[]},{"action_list":[{"critical":false,"description":"System action for creating an application","name":"action_create","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"799b98b1_dag"},"name":"838bd00b_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"799b98b1_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"mysql"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for deleting an application. Deletes created VMs as well","name":"action_delete","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"de59669e_dag"},"name":"c513217e_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"de59669e_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"mysql"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for restarting an application","name":"action_restart","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"ffbde667_dag"},"name":"7d861f9e_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"ffbde667_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"mysql"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for starting an application","name":"action_start","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"9122e7c7_dag"},"name":"d23fdfc0_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"9122e7c7_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"mysql"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"},{"critical":false,"description":"System action for stopping an application","name":"action_stop","runbook":{"description":"","main_task_local_reference":{"kind":"app_task","name":"070bf774_dag"},"name":"a826b126_runbook","task_definition_list":[{"attrs":{"edges":[],"type":""},"child_tasks_local_reference_list":[],"description":"","name":"070bf774_dag","retries":"0","target_any_local_reference":{"kind":"app_service","name":"mysql"},"timeout_secs":"0","type":"DAG","variable_list":[]}],"variable_list":[]},"type":"system"}],"container_spec":{"env":[{"name":"MYSQL_ROOT_PASSWORD","value":"@@{MYSQL_PASSWORD}@@"}],"name":"mysql","ports":[{"containerPort":3306,"name":"mysql"}]},"depends_on_list":[],"description":"","name":"mysql","port_list":[],"singleton":false,"tier":"","variable_list":[]}],"substrate_definition_list":[{"action_list":[],"create_spec":{"account_uuid":"8986e0a5-69e0-cb18-468e-309a06044467","metadata":{"labels":{"app":"wordpress","provisioner":"calm","tier":"mysql"},"name":"MYSQLAPP","namespace":"@@{K8S_NAMESPACE}@@"},"spec":{},"type":"PROVISION_K8S_POD"},"description":"","name":"MYSQLAPP","os_type":"Linux","readiness_probe":{"address":"","connection_port":22,"connection_type":"SSH","delay_secs":"60","disable_readiness_probe":false},"type":"K8S_POD","variable_list":[]},{"action_list":[],"create_spec":{"account_uuid":"8986e0a5-69e0-cb18-468e-309a06044467","metadata":{"labels":{"app":"wordpress","provisioner":"calm","tier":"frontend"},"name":"WORDPRESSAPP","namespace":"@@{K8S_NAMESPACE}@@"},"spec":{},"type":"PROVISION_K8S_POD"},"description":"","name":"WORDPRESSAPP","os_type":"Linux","readiness_probe":{"address":"","connection_port":22,"connection_type":"SSH","delay_secs":"60","disable_readiness_probe":false},"type":"K8S_POD","variable_list":[]}],"type":"USER"}},"status":{}}